<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Keymap Example</title>
        <script type="application/javascript" src="../bower_components/promiz/promiz.min.js"></script>
        <script type="application/javascript" src="../bower_components/nittro-core/dist/js/nittro-core.min.js"></script>
        <script type="application/javascript" src="../dist/js/nittro-extras-keymap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="example.css" />
    </head>
    <body>
        <header>
            <img src="data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22400%22%20height%3D%22400%22%20viewBox%3D%220%200%20400%20400%22%3E%3Cpath%20fill%3D%22%235e42a6%22%20d%3D%22M0%200h400v400H0z%22%2F%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M153.89%2088.22c-1.64-1.65-3.51-2.76-5.61-3.34-2.09-.59-6.52-.88-13.28-.88h-28.25c-3.03-.22-6.07-.38-9.11-.5-3.03-.11-6.18-.28-9.44-.5l-.36%203c-.23.7-.34%201.34-.34%201.92v1.58c0%203.73%201.4%205.95%204.2%206.64%208.63%201.17%2014.16%202.74%2016.61%204.72%202.46%201.98%203.69%204.84%203.69%208.56v176.96c0%204.42-1.4%207.69-4.2%209.79-2.81%202.1-8.41%203.84-16.8%205.24-1.17.24-2.16.82-2.98%201.76-.82.93-1.22%202.56-1.22%204.89v2.8c0%201.16.23%202.2.7%203.14%205.13-.53%2010.79-1%2016.97-1.41%206.19-.39%2012.66-.59%2019.44-.59%206.75%200%2012.7.2%2017.84.59%205.13.41%2010.62.88%2016.45%201.41.46-2.33.69-4.32.69-5.95%200-2.57-.41-4.27-1.22-5.08-.81-.81-1.8-1.34-2.97-1.58-4.9-.94-8.82-1.81-11.73-2.62-2.92-.82-5.14-1.75-6.66-2.8-1.51-1.05-2.44-2.33-2.79-3.85-.35-1.51-.52-3.45-.52-5.79V135.05L271%20310c2.07%202.45%204.02%204.05%205.86%204.83%201.84.78%203.57%201.17%205.17%201.17H291V111.03c0-4.67%201.39-8.06%204.19-10.15%202.8-2.11%208.05-3.74%2015.75-4.91%202.8-.47%204.2-2.69%204.2-6.66%200-.7-.06-1.64-.17-2.81-.12-1.16-.29-2.33-.53-3.5-5.37.4-10.73.66-16.1.8-5.36.13-11.78.2-19.25.2-7.47%200-14-.07-19.61-.2-5.59-.14-11.3-.4-17.14-.8-.46%201.17-.7%202.34-.7%203.5v2.78c0%203.73%201.52%205.95%204.55%206.64%208.87%201.17%2015.06%202.8%2018.56%204.89%203.5%202.1%205.25%205.71%205.25%2010.83v124.02L153.89%2088.22z%22%2F%3E%3Cpath%20fill%3D%22%23a1a1a1%22%20d%3D%22M73.8%20289c-3.6%205.8-6.67%2011.16-9.22%2016.06-2.54%204.9-4.67%209.48-6.36%2013.75-1.7%204.26-3.06%208.26-4.06%2011.99-1%203.74-1.72%207.34-2.16%2010.81v1.5c0%20.73.23%201.16.7%201.3.47.13%201.14.2%202.02.2.86%200%201.89-.07%203.08-.2%201.18-.14%202.3-.36%203.36-.66%201.06-.29%201.96-.67%202.72-1.14.74-.47%201.12-1.01%201.12-1.61.27-5.26.7-10%201.3-14.2.6-4.2%201.5-8.43%202.7-12.69%201.2-4.27%202.83-8.84%204.89-13.7%202.07-4.87%204.71-10.61%207.91-17.24V280H47.7c-.47%200-.82.05-1.06.16-.23.09-.41.43-.55%201.01-.33%202.03-.75%204.15-1.25%206.39-.5%202.23-1.18%204.75-2.04%207.55.33.14.84.23%201.54.3.7.06%201.15.09%201.36.09.79%200%201.35-.36%201.69-1.09.74-1.73%201.57-3.07%202.5-4%20.94-.94%202.05-1.41%203.33-1.41H73.8z%22%2F%3E%3C%2Fsvg%3E" width="80" height="80" alt="N" />
            <h1>Nittro.Extras.Keymap example</h1>
        </header>

        <article>
            <h2>Try pressing some of the following key combinations:</h2>

            <ul>
                <li id="action-find">
                    <code>Ctrl+F</code> (<code>Cmd+F</code> on a Mac)
                </li>
                <li id="action-bold">
                    <code>Ctrl+B</code> (<code>Cmd+B</code> on a Mac)
                </li>
                <li id="action-mute">
                    <code>Alt+M</code>
                </li>
                <li id="action-quit">
                    <code>Escape</code>
                </li>
            </ul>
        </article>

        <article>
            <h2>Try tabbing through this form:</h2>

            <table id="form">
                <tbody>
                    <tr>
                        <td>
                            <div class="row">
                                <label class="col">First name:</label>
                                <div class="col">
                                    <input type="text" data-tabindex="1" />
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="row">
                                <label class="col">Payment method:</label>
                                <div class="col">
                                    <select data-tabindex="3">
                                        <option>Cash</option>
                                        <option>PayPal</option>
                                        <option>Credit Card</option>
                                    </select>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="row">
                                <label class="col">Last name:</label>
                                <div class="col">
                                    <input type="text" data-tabindex="2" />
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="row">
                                <label class="col">Notes:</label>
                                <div class="col">
                                    <textarea rows="3" data-tabindex="4" disabled></textarea>
                                </div>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <button type="button" data-tabindex="5">Subscribe</button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </article>

        <script type="application/javascript">
            _context.invoke(function(Manager, Keymap, TabContext) {
                var manager = new Manager(),
                    map = new Keymap(),
                    ctx = new TabContext();

                function doAction(name) {
                    document.getElementById('action-' + name).innerHTML += ' <i class="fa fa-check"></i>';
                }

                map.add('Action+F', function() { doAction('find'); });
                map.add('Action+B', function() { doAction('bold'); });
                map.add('Alt+M', function() { doAction('mute'); });
                map.add('Escape', function() { doAction('quit'); });
                manager.push(map);

                var items = [].slice.call(document.getElementById('form').getElementsByTagName('*'));

                items = items.filter(function (elem) {
                    return elem.hasAttribute('data-tabindex');
                }).sort(function (a, b) {
                    return parseInt(a.getAttribute('data-tabindex')) - parseInt(b.getAttribute('data-tabindex'));
                });

                ctx.add(items);
                manager.push(ctx);

            }, {
                Manager: 'Nittro.Extras.Keymap.Manager',
                Keymap: 'Nittro.Extras.Keymap.Keymap',
                TabContext: 'Nittro.Extras.Keymap.TabContext'
            });
        </script>
    </body>
</html>
